import axios from 'axios'
import { API_BASE_URL } from '../../constants/api.const'
import { useContext } from 'react'
import BoardContext from '../../routes/TaskBoard/context/boardContext'
import './DeleteColumn.css'

export default function DeleteColumn({ id }) {
  const { setColData } = useContext(BoardContext)

  function handleClick() {
    axios
      .delete(`${API_BASE_URL}/columns/${id}`, {
        headers: {
          Authorization: `Bearer ${sessionStorage.getItem('token')}`,
        },
      })
      .then(setColData((cols) => cols.filter((col) => col.id !== id)))
      .catch((err) => console.error(`Error: ${err}`))
  }
  return (
    <button
      className="button-delete-column"
      onClick={() => {
        handleClick()
      }}
    >
      <svg
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M8.20912 9L6.60938 7.41769C6.504 7.30031 6.45131 7.1655 6.45131 7.01325C6.45131 6.861 6.507 6.72919 6.61837 6.61781C6.72975 6.50644 6.86156 6.45075 7.01381 6.45075C7.16606 6.45075 7.30087 6.50344 7.41825 6.60881L9.00056 8.20856L10.5829 6.60881C10.7471 6.45656 10.9316 6.40969 11.1364 6.46819C11.3411 6.52669 11.4729 6.6585 11.5318 6.86362C11.5907 7.06875 11.5438 7.25325 11.3912 7.41712L9.79144 8.99944L11.3912 10.5818C11.5434 10.746 11.5903 10.9305 11.5318 11.1352C11.4733 11.34 11.3415 11.4718 11.1364 11.5307C10.9313 11.5896 10.7467 11.5427 10.5829 11.3901L9.00056 9.79031L7.41825 11.3901C7.30087 11.4954 7.16606 11.5481 7.01381 11.5481C6.86156 11.5481 6.72975 11.4924 6.61837 11.3811C6.507 11.2697 6.45131 11.1379 6.45131 10.9856C6.45131 10.8334 6.504 10.6986 6.60938 10.5812L8.20912 9ZM9 15.75C10.9102 15.7031 12.501 15.0439 13.7722 13.7722C15.0435 12.5006 15.7028 10.9099 15.75 9C15.7031 7.08975 15.0439 5.499 13.7722 4.22775C12.5006 2.9565 10.9099 2.29725 9 2.25C7.08975 2.29688 5.499 2.95612 4.22775 4.22775C2.9565 5.49937 2.29725 7.09013 2.25 9C2.29688 10.9102 2.95612 12.501 4.22775 13.7722C5.49937 15.0435 7.09013 15.7028 9 15.75ZM9 16.875C6.77325 16.8165 4.91869 16.0461 3.43631 14.5637C1.95394 13.0813 1.1835 11.2267 1.125 9C1.1835 6.77325 1.95394 4.91869 3.43631 3.43631C4.91869 1.95394 6.77325 1.1835 9 1.125C11.2267 1.1835 13.0813 1.95394 14.5637 3.43631C16.0461 4.91869 16.8165 6.77325 16.875 9C16.8165 11.2267 16.0461 13.0813 14.5637 14.5637C13.0813 16.0461 11.2267 16.8165 9 16.875V16.875Z"
          fill="currentcolor"
        />
      </svg>
    </button>
  )
}
